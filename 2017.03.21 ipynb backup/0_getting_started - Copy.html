<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Working with the core data structure &mdash; impact 0.8.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/simplex/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.3/require.min.js"></script>
    <link rel="top" title="impact 0.8.0 documentation" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          impact</a>
        <span class="navbar-text navbar-version pull-left"><b>0.8</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="/">Home</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">impact <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Impact: a framework for analyzing microbial physiology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#quick-start-guide">Quick Start Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#Importing-data">Importing data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html#Querying-and-filtering-for-data">Querying and filtering for data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#Exploring-features">Exploring features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core_structure.html">Core structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../core_structure.html#TrialIdentifier-class"><code class="docutils literal"><span class="pre">TrialIdentifier</span></code> class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_structure.html#AnalyteData"><code class="docutils literal"><span class="pre">AnalyteData</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_structure.html#SingleTrial"><code class="docutils literal"><span class="pre">SingleTrial</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_structure.html#ReplicateTrial"><code class="docutils literal"><span class="pre">ReplicateTrial</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_structure.html#Experiment"><code class="docutils literal"><span class="pre">Experiment</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_structure.html#Project"><code class="docutils literal"><span class="pre">Project</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1_features_0.html">Analyzing Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1_features_0.html#Rates">Rates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_features_0.html#Specific-Productivity">Specific Productivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_features_0.html#Metabolic-Model-Integration">Metabolic Model Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_features_0.html#dFBA-Batch-Integration">dFBA Batch Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_features_0.html#Carbon-Balance">Carbon Balance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_features_0.html#Flux-mapping-with-escher">Flux mapping with escher</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2_features_1.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../impact.html">impact package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../impact.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../impact.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../impact.html#module-impact">Module contents</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">This page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Working with the core data structure</a><ul>
<li><a class="reference internal" href="#TrialIdentifier"><code class="docutils literal"><span class="pre">TrialIdentifier</span></code></a></li>
<li><a class="reference internal" href="#TimePoint"><code class="docutils literal"><span class="pre">TimePoint</span></code></a></li>
<li><a class="reference internal" href="#TimeCourse">TimeCourse</a></li>
<li><a class="reference internal" href="#SingleTrial">SingleTrial</a></li>
<li><a class="reference internal" href="#ReplicateTrial">ReplicateTrial</a></li>
<li><a class="reference internal" href="#Experiment">Experiment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Database">Database</a></li>
<li><a class="reference internal" href="#Exporting-Data">Exporting Data</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/2017.03.21 ipynb backup/0_getting_started - Copy.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class^=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: #D84315;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="section" id="Working-with-the-core-data-structure">
<h1>Working with the core data structure<a class="headerlink" href="#Working-with-the-core-data-structure" title="Permalink to this headline">¶</a></h1>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [28]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">impact</span> <span class="kn">as</span> <span class="nn">impt</span>  <span class="c1"># First, we import the package</span>
<span class="kn">import</span> <span class="nn">os</span>  <span class="c1"># We&#39;ll use os to clean up files</span>

<span class="c1"># Let&#39;s also import the plotting libraries</span>
<span class="kn">import</span> <span class="nn">impact.plotting</span> <span class="c1"># This will inject plotly for jupyter</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="kn">as</span> <span class="nn">go</span>
<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">iplot</span> <span class="k">as</span> <span class="n">plot</span>

<span class="c1"># Let&#39;s also make a quick helper function to generate static plots</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
</pre></div>
</div>
</div>
<p>The core data structure is composed of modular and hierarchical classes
to organize and extract features from data. These are the key units:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Model</th>
<th class="head">Funct
ion</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Tri</span>
<span class="pre">alIde</span>
<span class="pre">ntifi</span>
<span class="pre">er</span></code></td>
<td>Descr
ibes
a
trial
(time
,
analy
te,
strai
n,
media
,
etc.)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Ana</span>
<span class="pre">lyteD</span>
<span class="pre">ata</span></code></td>
<td>Time,
data
point
s
and
vecto
rs
for
quant
ified
data
(g/L
produ
ct,
OD,
etc.)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Sin</span>
<span class="pre">gleTr</span>
<span class="pre">ial</span></code></td>
<td>All
analy
tes
for a
given
unit
(e.g.
a
tube,
well
on
plate
,
biore
actor
,
etc.)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Rep</span>
<span class="pre">licat</span>
<span class="pre">eTria</span>
<span class="pre">l</span></code></td>
<td>Conta
ins
a set
of
<code class="docutils literal"><span class="pre">Sin</span>
<span class="pre">gleTr</span>
<span class="pre">ial</span></code>
s
with
repli
cates
group
ed
to
calcu
late
stati
stics</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Exp</span>
<span class="pre">erime</span>
<span class="pre">nt</span></code></td>
<td>All
of
the
trial
s
perfo
rmed
on a
given
date</td>
</tr>
<tr class="row-odd"><td><a href="#id1"><span class="problematic" id="id2">``</span></a>Pro
ject`
`</td>
<td>Group
s
of
exper
iment
s
with
overa
ll
goals</td>
</tr>
</tbody>
</table>
<div class="section" id="TrialIdentifier">
<h2><code class="docutils literal"><span class="pre">TrialIdentifier</span></code><a class="headerlink" href="#TrialIdentifier" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">TrialIdentifier</span></code> is responsible for describing trials. It is
composed of several other objects, each one should be defined to be able
to effectively search for this data in the future. There are shortcuts
which can be used to quickly analyze data using the core module.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Model</th>
<th class="head">Funct
ion</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Strai
n</td>
<td>Descr
ibes
the
organ
ism
being
chara
cteri
zed
(e.g.
strai
n,
knock
outs,
plasm
ids,
etc.)</td>
</tr>
<tr class="row-odd"><td>Media</td>
<td>Descr
ibed
the
mediu
m
used
to
chara
cteri
ze
the
organ
ism
(e.g.
M9 +
0.02%
glc_
D)</td>
</tr>
<tr class="row-even"><td>Envir
onmen
t</td>
<td>The
condi
tions
and
labwa
re
used
(e.g.
96-we
ll
plate
,
250RP
M,
37C)</td>
</tr>
</tbody>
</table>
<p>We&#8217;ll create some identifiers to use as examples:</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># The nickname is what a strain would be referred to in raw equipment PCs. Something short but uniquely identifying should be used when possible</span>
<span class="c1"># The formal name should describe the strain exactly</span>
<span class="c1"># Knockouts should be a list of reaction names. These reactions should follow BiGG convention</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">impt</span><span class="o">.</span><span class="n">Strain</span><span class="p">(</span><span class="n">nickname</span><span class="o">=</span><span class="s1">&#39;MG d(pgi)&#39;</span><span class="p">,</span><span class="n">formal_name</span><span class="o">=</span><span class="s1">&#39;Escherichia coli MG1655&#39;</span><span class="p">,</span><span class="n">knockouts</span><span class="o">=</span><span class="s1">&#39;PGI&#39;</span><span class="p">)</span>
<span class="n">med</span> <span class="o">=</span> <span class="n">impt</span><span class="o">.</span><span class="n">Medium</span><span class="p">()</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">impt</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>

<span class="c1"># Now we can create the TrialIdentifier, which will describe a single analyte for a single trial</span>
<span class="n">ti</span> <span class="o">=</span> <span class="n">TrialIdentifier</span><span class="p">(</span><span class="n">strain</span><span class="o">=</span><span class="n">st</span><span class="p">,</span><span class="n">medium</span><span class="o">=</span><span class="n">med</span><span class="p">,</span><span class="n">environment</span><span class="o">=</span><span class="n">env</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">ti</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
{&#39;knockouts&#39;: None, &#39;_sa_instance_state&#39;: &lt;sqlalchemy.orm.state.InstanceState object at 0x000001D0FBEB6E10&gt;, &#39;nickname&#39;: &#39;MG d(pgi)&#39;, &#39;formal_name&#39;: &#39;Escherichia coli MG1655&#39;}
</pre></div></div>
</div>
<p>Once the identifier is ready, data can be added. Raw data is generally
found in vector form or as individual time points. Data can be imported
in either format but will ultimately be saved as time points.</p>
</div>
<div class="section" id="TimePoint">
<h2><code class="docutils literal"><span class="pre">TimePoint</span></code><a class="headerlink" href="#TimePoint" title="Permalink to this headline">¶</a></h2>
<p>NumPy will be used to generate some data to input</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [29]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">time_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="n">growth_equation</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mf">0.05</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
<span class="n">data_points</span> <span class="o">=</span> <span class="p">[</span><span class="n">growth_equation</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time_points</span><span class="p">]</span>

<span class="n">plot</span><span class="p">([</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">time_points</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">data_points</span><span class="p">)])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div id="9f8fc495-5864-459b-a123-579abbe44474" style="height: 525px; width: 100%;" class="plotly-graph-div"></div><script type="text/javascript">require(["plotly"], function(Plotly) { window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL="https://plot.ly";Plotly.newPlot("9f8fc495-5864-459b-a123-579abbe44474", [{"type": "scatter", "x": [0.0, 2.5, 5.0, 7.5, 10.0], "y": [0.05, 0.17451714787309208, 0.6091246980351737, 2.1260541000031394, 7.4206579551288305]}], {}, {"showLink": true, "linkText": "Export to plot.ly"})});</script></div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [30]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">time_points</span> <span class="o">=</span> <span class="p">[</span><span class="n">impt</span><span class="o">.</span><span class="n">TimePoint</span><span class="p">(</span><span class="n">trial_identifier</span> <span class="o">=</span> <span class="n">ti</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="n">time</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">)</span> <span class="k">for</span> <span class="n">time</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="p">[</span><span class="n">time_points</span><span class="p">,</span><span class="n">data_points</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">ValueError</span>                                Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-30-9a501e05d414&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-intense-fg ansi-bold">()</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>time_points <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>impt<span class="ansi-yellow-intense-fg ansi-bold">.</span>TimePoint<span class="ansi-yellow-intense-fg ansi-bold">(</span>trial_identifier <span class="ansi-yellow-intense-fg ansi-bold">=</span> ti<span class="ansi-yellow-intense-fg ansi-bold">,</span> time <span class="ansi-yellow-intense-fg ansi-bold">=</span> time<span class="ansi-yellow-intense-fg ansi-bold">,</span> data <span class="ansi-yellow-intense-fg ansi-bold">=</span> data<span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-green-intense-fg ansi-bold">for</span> time<span class="ansi-yellow-intense-fg ansi-bold">,</span> data <span class="ansi-green-intense-fg ansi-bold">in</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>time_points<span class="ansi-yellow-intense-fg ansi-bold">,</span>data_points<span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">]</span>

<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-30-9a501e05d414&gt;</span> in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-intense-fg ansi-bold">(.0)</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>time_points <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>impt<span class="ansi-yellow-intense-fg ansi-bold">.</span>TimePoint<span class="ansi-yellow-intense-fg ansi-bold">(</span>trial_identifier <span class="ansi-yellow-intense-fg ansi-bold">=</span> ti<span class="ansi-yellow-intense-fg ansi-bold">,</span> time <span class="ansi-yellow-intense-fg ansi-bold">=</span> time<span class="ansi-yellow-intense-fg ansi-bold">,</span> data <span class="ansi-yellow-intense-fg ansi-bold">=</span> data<span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-green-intense-fg ansi-bold">for</span> time<span class="ansi-yellow-intense-fg ansi-bold">,</span> data <span class="ansi-green-intense-fg ansi-bold">in</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>time_points<span class="ansi-yellow-intense-fg ansi-bold">,</span>data_points<span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">]</span>

<span class="ansi-red-intense-fg ansi-bold">ValueError</span>: too many values to unpack (expected 2)
</pre></div></div>
</div>
</div>
<div class="section" id="TimeCourse">
<h2>TimeCourse<a class="headerlink" href="#TimeCourse" title="Permalink to this headline">¶</a></h2>
<p>The TimeCourse can be created in two different ways, by importing
timePoints or by importing the time and data vectors directly. This will
depend on how the raw data is parsed.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Let&#39;s build some timePoint objects</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Building and Adding TimePoints one-by-one&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------------------&#39;</span><span class="p">)</span>
<span class="n">timepoint_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">time_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">26</span><span class="p">]</span>
<span class="n">data_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.02</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">0.8</span><span class="p">,</span><span class="mf">1.6</span><span class="p">,</span><span class="mf">1.7</span><span class="p">,</span><span class="mf">1.72</span><span class="p">,</span><span class="mf">1.72</span><span class="p">,</span><span class="mf">1.6</span><span class="p">,</span><span class="mf">1.55</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.45</span><span class="p">,</span><span class="mf">1.4</span><span class="p">]</span>
<span class="k">for</span> <span class="n">time</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">time_vector</span><span class="p">,</span>
                      <span class="n">data_vector</span><span class="p">):</span>
    <span class="n">timePoint</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">TimePoint</span><span class="p">(</span><span class="n">runID</span> <span class="o">=</span> <span class="n">trial_identifier</span><span class="p">,</span> <span class="n">analyte_name</span> <span class="o">=</span> <span class="s1">&#39;OD600&#39;</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">,</span> <span class="n">titer</span> <span class="o">=</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">timepoint_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timePoint</span><span class="p">)</span>

<span class="n">timeCourse</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">TimeCourse</span><span class="p">()</span>
<span class="k">for</span> <span class="n">timepoint</span> <span class="ow">in</span> <span class="n">timepoint_list</span><span class="p">:</span>
    <span class="n">timeCourse</span><span class="o">.</span><span class="n">add_timepoint</span><span class="p">(</span><span class="n">timepoint</span><span class="p">)</span>

<span class="c1"># This data will be sorted and put into .timeVec and .dataVec</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Time: &#39;</span><span class="p">,</span><span class="n">timeCourse</span><span class="o">.</span><span class="n">time_vector</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Data: &#39;</span><span class="p">,</span><span class="n">timeCourse</span><span class="o">.</span><span class="n">data_vector</span><span class="p">)</span>

<span class="c1"># The trial_identifier will also be abridged and set in the timeCourse</span>
<span class="n">timeCoursetrial_identifier</span> <span class="o">=</span> <span class="n">timeCourse</span><span class="o">.</span><span class="n">trial_identifier</span>
<span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">timeCoursetrial_identifier</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span><span class="s1">&#39;:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">timeCoursetrial_identifier</span><span class="o">.</span><span class="n">__getattribute__</span><span class="p">(</span><span class="n">attribute</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Adding the timeVec/dataVec directly&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------------------&#39;</span><span class="p">)</span>
<span class="c1"># We can also make this more directly by adding the vectors directly</span>
<span class="n">timeCourse</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">TimeCourse</span><span class="p">()</span>
<span class="n">timeCourse</span><span class="o">.</span><span class="n">trial_identifier</span> <span class="o">=</span> <span class="n">trial_identifier</span>
<span class="n">timeCourse</span><span class="o">.</span><span class="n">time_vector</span> <span class="o">=</span> <span class="n">time_vector</span>
<span class="n">timeCourse</span><span class="o">.</span><span class="n">data_vector</span> <span class="o">=</span> <span class="n">data_vector</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Time: &#39;</span><span class="p">,</span><span class="n">timeCourse</span><span class="o">.</span><span class="n">time_vector</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Data: &#39;</span><span class="p">,</span><span class="n">timeCourse</span><span class="o">.</span><span class="n">data_vector</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
Building and Adding TimePoints one-by-one
--------------------------------------------------------
Time:  [ 0  2  4  6  8 10 12 14 16 18 20 22 24 26]
Data:  [ 0.02  0.1   0.2   0.4   0.8   1.6   1.7   1.72  1.72  1.6   1.55  1.5
  1.45  1.4 ]
_analyte_type :  biomass
id_2 :   IPTG
time :   -1
analyte_name :   OD600
strain_id :      MG1655 d(lacI)
id_3 :
id_1 :   pKDL071
replicate_id :   None




Adding the timeVec/dataVec directly
--------------------------------------------------------
Started fit
14
Finished fit
Time:  [ 0  2  4  6  8 10 12 14 16 18 20 22 24 26]
Data:  [ 0.02  0.1   0.2   0.4   0.8   1.6   1.7   1.72  1.72  1.6   1.55  1.5
  1.45  1.4 ]
</pre></div></div>
</div>
</div>
<div class="section" id="SingleTrial">
<h2>SingleTrial<a class="headerlink" href="#SingleTrial" title="Permalink to this headline">¶</a></h2>
<p>Now let&#8217;s build a variety of timeCourse objects to build into a
singleExperimentObject</p>
<ul class="simple">
<li>Substrate: Glucose</li>
<li>Products: Ethanol, Acetate</li>
<li>Biomass: OD600</li>
</ul>
<p>We will use cobraPy to quickly generate some data.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">cobra</span>
<span class="kn">import</span> <span class="nn">cobra.test</span>

<span class="c1"># Let&#39;s grab the iJO1366 E. coli model, cobra&#39;s test module has a copy</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">cobra</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">create_test_model</span><span class="p">(</span><span class="s2">&quot;ecoli&quot;</span><span class="p">)</span>

<span class="c1"># Optimize the model after simulating anaerobic conditions, we don&#39;t get many products aerobically</span>
<span class="n">model</span><span class="o">.</span><span class="n">reactions</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="s1">&#39;EX_o2_e&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower_bound</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">model</span><span class="o">.</span><span class="n">reactions</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="s1">&#39;EX_o2_e&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper_bound</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Optimize the model</span>
<span class="n">model</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>

<span class="c1"># Print a summary of the fluxes</span>
<span class="n">model</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
IN FLUXES                     OUT FLUXES                    OBJECTIVES
glc__D_e    -10.00            h_e         27.87             Ec_biomass_iJO1366_core_53p95M    0.242
nh4_e        -2.61            for_e       17.28
h2o_e        -1.71            ac_e         8.21
pi_e         -0.23            etoh_e       8.08
co2_e        -0.09            succ_e       0.08
so4_e        -0.06            5drib_c      0.00
k_e          -0.05            glyclt_e     0.00
mg2_e        -0.00            mththf_c     0.00
fe2_e        -0.00            4crsol_c     0.00
fe3_e        -0.00            amob_c       0.00
ca2_e        -0.00            meoh_e       0.00
cl_e         -0.00
cu2_e        -0.00
mn2_e        -0.00
zn2_e        -0.00
ni2_e        -0.00
mobd_e       -0.00
cobalt2_e    -0.00
</pre></div></div>
</div>
<p>Now that we have a flux distribution, we can use Fermat.synthetic_data
to generate batch profiles using dFBA.</p>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Let&#39;s consider one substrate and five products</span>
<span class="n">biomass_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Ec_biomass_iJO1366_core_53p95M&#39;</span><span class="p">]</span>
<span class="n">substrate_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;EX_glc_e&#39;</span><span class="p">]</span>
<span class="n">product_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;EX_for_e&#39;</span><span class="p">,</span><span class="s1">&#39;EX_ac_e&#39;</span><span class="p">,</span><span class="s1">&#39;EX_etoh_e&#39;</span><span class="p">,</span><span class="s1">&#39;EX_succ_e&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># We&#39;ll use numpy to generate an arbitrary time vector</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># The initial conditions (mM) [biomass, substrate, product1, product2, ..., product_n]</span>
<span class="n">y0</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Returns a dictionary of the profiles</span>
<span class="kn">from</span> <span class="nn">impact.synthetic_data</span> <span class="kn">import</span> <span class="n">generate_data</span>
<span class="n">dFBA_profiles</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">biomass_keys</span><span class="p">,</span> <span class="n">substrate_keys</span><span class="p">,</span> <span class="n">product_keys</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_14_0.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_14_0.png" />
</div>
</div>
<p>Now that we have some time profiles, we can import them into impact</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>1. We must define a trial_identifier which contains information about the strain, conditions and products
2. We must build TimeCourse objects out of each of the profiles, and add them to a single trial object
</pre></div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Make the object to store the data</span>
<span class="n">singleTrial</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">SingleTrial</span><span class="p">()</span>

<span class="c1"># For each exchange reaction in the profile, generate a TimeCourse</span>
<span class="k">for</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">dFBA_profiles</span><span class="p">:</span>
    <span class="c1"># Let&#39;s build some trial_identifier for the data</span>
    <span class="n">trial_identifier</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">TrialIdentifier</span><span class="p">()</span>
    <span class="n">trial_identifier</span><span class="o">.</span><span class="n">strain_id</span> <span class="o">=</span> <span class="s1">&#39;iJO1366&#39;</span>
    <span class="n">trial_identifier</span><span class="o">.</span><span class="n">id_1</span> <span class="o">=</span> <span class="s1">&#39;Anaerobic&#39;</span>

    <span class="k">if</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">biomass_keys</span><span class="p">:</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_name</span> <span class="o">=</span> <span class="s1">&#39;OD600&#39;</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_type</span> <span class="o">=</span> <span class="s1">&#39;OD&#39;</span>
    <span class="k">elif</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">substrate_keys</span><span class="p">:</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_name</span> <span class="o">=</span> <span class="n">exchange</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_type</span> <span class="o">=</span> <span class="s1">&#39;substrate&#39;</span>
    <span class="k">elif</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">product_keys</span><span class="p">:</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_name</span> <span class="o">=</span> <span class="n">exchange</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_type</span> <span class="o">=</span> <span class="s1">&#39;product&#39;</span>

    <span class="c1"># Build the objects</span>
    <span class="n">tempTimeCourse</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">TimeCourse</span><span class="p">()</span>
    <span class="n">tempTimeCourse</span><span class="o">.</span><span class="n">trial_identifier</span> <span class="o">=</span> <span class="n">trial_identifier</span>
    <span class="n">tempTimeCourse</span><span class="o">.</span><span class="n">time_vector</span> <span class="o">=</span> <span class="n">t</span>
    <span class="n">tempTimeCourse</span><span class="o">.</span><span class="n">data_vector</span> <span class="o">=</span> <span class="n">dFBA_profiles</span><span class="p">[</span><span class="n">exchange</span><span class="p">]</span>

    <span class="c1"># Finally, add the completed object to the trial</span>
    <span class="n">singleTrial</span><span class="o">.</span><span class="n">add_titer</span><span class="p">(</span><span class="n">tempTimeCourse</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
Please use biomass titerType instead of:  OD
Started fit
1000
Finished fit
</pre></div></div>
</div>
<p>We have now filled a SingleTrial with all of the time courses from one
dFBA simulation.</p>
</div>
<div class="section" id="ReplicateTrial">
<h2>ReplicateTrial<a class="headerlink" href="#ReplicateTrial" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s build some replicates by adding random noise and generating the
dFBA data</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">replicateList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="c1"># Let&#39;s add some noise to the data to simulate experimental error and generate some more data</span>
    <span class="n">dFBA_profiles</span> <span class="o">=</span> <span class="n">generate_data</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">biomass_keys</span><span class="p">,</span> <span class="n">substrate_keys</span><span class="p">,</span> <span class="n">product_keys</span><span class="p">,</span> <span class="n">noise</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
    <span class="n">replicateList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dFBA_profiles</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">biomass_keys</span><span class="o">+</span><span class="n">substrate_keys</span><span class="o">+</span><span class="n">product_keys</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">replicate</span> <span class="ow">in</span> <span class="n">replicateList</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">replicate</span><span class="p">[</span><span class="n">exchange</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Replicate #&#39;</span><span class="o">+</span><span class="n">repNum</span> <span class="k">for</span> <span class="n">repNum</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">]],</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_0.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_0.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_1.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_1.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_2.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_2.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_3.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_3.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_4.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_4.png" />
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_5.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_19_5.png" />
</div>
</div>
<p>Now, we can create a SingleTrial object for each replicate.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Create the replicates by repeating the above code</span>
<span class="n">singleTrialList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">replicate_id</span><span class="p">,</span> <span class="n">replicate</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">replicateList</span><span class="p">):</span>
    <span class="n">timeCourseList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">biomass_keys</span><span class="o">+</span><span class="n">substrate_keys</span><span class="o">+</span><span class="n">product_keys</span><span class="p">:</span>
        <span class="n">trial_identifier</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">TrialIdentifier</span><span class="p">()</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">strain_id</span> <span class="o">=</span> <span class="s1">&#39;iJO1366&#39;</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">id_1</span> <span class="o">=</span> <span class="s1">&#39;Anaerobic&#39;</span>
        <span class="n">trial_identifier</span><span class="o">.</span><span class="n">replicate_id</span> <span class="o">=</span> <span class="n">replicate_id</span>
        <span class="k">if</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">biomass_keys</span><span class="p">:</span>
            <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_name</span> <span class="o">=</span> <span class="n">exchange</span>
            <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_type</span> <span class="o">=</span> <span class="s1">&#39;biomass&#39;</span>
        <span class="k">if</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">substrate_keys</span><span class="p">:</span>
            <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_name</span> <span class="o">=</span> <span class="n">exchange</span>
            <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_type</span> <span class="o">=</span> <span class="s1">&#39;substrate&#39;</span>
        <span class="k">if</span> <span class="n">exchange</span> <span class="ow">in</span> <span class="n">product_keys</span><span class="p">:</span>
            <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_name</span> <span class="o">=</span> <span class="n">exchange</span>
            <span class="n">trial_identifier</span><span class="o">.</span><span class="n">analyte_type</span> <span class="o">=</span> <span class="s1">&#39;product&#39;</span>

        <span class="n">tempTimeCourse</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">TimeCourse</span><span class="p">()</span>
        <span class="n">tempTimeCourse</span><span class="o">.</span><span class="n">trial_identifier</span> <span class="o">=</span> <span class="n">trial_identifier</span>
        <span class="n">tempTimeCourse</span><span class="o">.</span><span class="n">time_vector</span> <span class="o">=</span> <span class="n">t</span>
        <span class="n">tempTimeCourse</span><span class="o">.</span><span class="n">data_vector</span> <span class="o">=</span> <span class="n">replicate</span><span class="p">[</span><span class="n">exchange</span><span class="p">]</span>
        <span class="n">timeCourseList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tempTimeCourse</span><span class="p">)</span>

        <span class="c1"># Now we can build a singleTrial object and load all the data</span>
        <span class="n">singleTrial</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">SingleTrial</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">timeCourse</span> <span class="ow">in</span> <span class="n">timeCourseList</span><span class="p">:</span>
            <span class="n">singleTrial</span><span class="o">.</span><span class="n">add_titer</span><span class="p">(</span><span class="n">timeCourse</span><span class="p">)</span>

    <span class="n">singleTrialList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">singleTrial</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
Started fit
1000
Finished fit
Started fit
1000
Finished fit
Started fit
1000
Finished fit
Started fit
1000
Finished fit
</pre></div></div>
</div>
<p>Finally, we can add the SingleTrial objects to a ReplicateTrial</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">replicateTrial</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">ReplicateTrial</span><span class="p">()</span>
<span class="k">for</span> <span class="n">singleTrial</span> <span class="ow">in</span> <span class="n">singleTrialList</span><span class="p">:</span>
    <span class="n">replicateTrial</span><span class="o">.</span><span class="n">add_replicate</span><span class="p">(</span><span class="n">singleTrial</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
</pre></div></div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_1.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_1.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_2.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_2.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_3.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_3.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_4.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_4.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_5.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_5.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_6.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_6.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_7.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_7.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_8.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_8.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_9.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_9.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_10.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_10.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_11.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_11.png" />
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_12.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_23_12.png" />
</div>
</div>
</div>
<div class="section" id="Experiment">
<h2>Experiment<a class="headerlink" href="#Experiment" title="Permalink to this headline">¶</a></h2>
<p>This is one of the highest level objects and allows you now to analyze
your data. All data should be built into an Experiment, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>1x TimeCourse -&gt; 1x SingleTrial -&gt; 1x Replicate Trial -&gt; 1x Experiment
</pre></div>
</div>
<p>is as valid as</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>80x TimeCourse -&gt; 40x Single Trial -&gt; 20x ReplicateTrial -&gt; 1x Experiment
</pre></div>
</div>
<p>Here, we have</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>1x ReplicateTrial * 4x SingleTrial * 5x Titers (exchanges time courses) = 20 total Titer objects
</pre></div>
</div>
<p>We can put all of this together in an Experiment, where we define some
information about hte experiment and have the option to commit to the
database.</p>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">datetime</span>

<span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;import_date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">(),</span>
    <span class="s1">&#39;experiment_start_date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">(),</span>
    <span class="s1">&#39;experiment_end_date&#39;</span><span class="p">:</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">(),</span>
    <span class="s1">&#39;primary_scientist_name&#39;</span><span class="p">:</span><span class="s1">&#39;Naveen Venayak&#39;</span><span class="p">,</span>
    <span class="s1">&#39;medium_base&#39;</span><span class="p">:</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span>
    <span class="s1">&#39;medium_supplements&#39;</span><span class="p">:</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span>
    <span class="s1">&#39;notes&#39;</span><span class="p">:</span><span class="s1">&#39;This is a test experiment input&#39;</span><span class="p">,</span>
    <span class="s1">&#39;experiment_title&#39;</span><span class="p">:</span> <span class="s1">&#39;2016.05.17 gettingStarted Tutorial&#39;</span>
<span class="p">}</span>

<span class="c1"># Create the experiment object, we add the optional info to the constructor (we can also add this later if preferred)</span>
<span class="n">experiment</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">Experiment</span><span class="p">(</span><span class="n">info</span> <span class="o">=</span> <span class="n">info</span><span class="p">)</span>

<span class="c1"># Add the ReplicateTrial</span>
<span class="n">experiment</span><span class="o">.</span><span class="n">add_replicate_trial</span><span class="p">(</span><span class="n">replicateTrial</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now that we have an experiment object, we can use it to plot some data</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># experiment.printGenericTimeCourse(titersToPlot = biomass_keys+product_keys)</span>
<span class="n">replicate_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">experiment</span><span class="o">.</span><span class="n">replicate_experiment_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">experiment</span><span class="o">.</span><span class="n">replicate_experiment_dict</span><span class="p">]</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">printGenericTimeCourse_plotly</span><span class="p">(</span><span class="n">replicateTrialList</span><span class="o">=</span><span class="n">replicate_list</span><span class="p">,</span>
                                                <span class="n">dbName</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">strainsToPlot</span><span class="o">=</span><span class="p">[],</span>
                                                <span class="n">titersToPlot</span><span class="o">=</span><span class="n">product_keys</span><span class="p">,</span><span class="n">output_type</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
                                                <span class="n">yieldFlag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">titerFlag</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">endpointFlag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sortBy</span><span class="o">=</span><span class="s1">&#39;strain_id&#39;</span><span class="p">)</span>
<span class="c1"># print(html)</span>
<span class="c1"># from IPython.display import Image</span>
<span class="c1"># Image(filename=filename)</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;script src=&quot;https://cdn.plot.ly/plotly-latest.min.js&quot;&gt;&lt;/script&gt;&#39;</span><span class="o">+</span><span class="n">html</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
This is the format of your plot grid:
[ (1,1) x1,y1 ]  [ (1,2) x2,y2 ]  [ (1,3) x3,y3 ]
[ (2,1) x4,y4 ]  [ (2,2) x5,y5 ]  [ (2,3) x6,y6 ]

</pre></div></div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>Out[14]:
</pre></div>
</div>
<div class="container">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script><div id="8eab5b0e-6c97-46e3-83e3-99a3902c366b" style="height: 600px; width: 100%;" class="plotly-graph-div"></div><script type="text/javascript">window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL="https://plot.ly";Plotly.newPlot("8eab5b0e-6c97-46e3-83e3-99a3902c366b", [{"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x1", "x": ["Anaerobic,"], "yaxis": "y1", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.17133524915986847], "color": "rgb(166,206,227)"}, "y": [1.7447286078445146], "legendgroup": "iJO1366", "name": "iJO1366"}, {"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x2", "x": ["Anaerobic,"], "yaxis": "y2", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.06552622084895564], "color": "rgb(166,206,227)"}, "y": [0.8538052647656237], "legendgroup": "iJO1366", "name": "iJO1366"}, {"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x3", "x": ["Anaerobic,"], "yaxis": "y3", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.1032169629194151], "color": "rgb(166,206,227)"}, "y": [0.828086689956261], "legendgroup": "iJO1366", "name": "iJO1366"}, {"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x4", "x": ["Anaerobic,"], "yaxis": "y4", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.0006758821088666315], "color": "rgb(166,206,227)"}, "y": [0.008438011891059647], "legendgroup": "iJO1366", "name": "iJO1366"}], {"height": 600, "xaxis3": {"anchor": "y3", "domain": [0.7111111111111111, 1.0]}, "barmode": "group", "xaxis4": {"anchor": "y4", "domain": [0.0, 0.2888888888888889]}, "yaxis1": {"anchor": "x1", "domain": [0.6000000000000001, 1.0], "rangemode": "nonnegative", "title": "EX_for_e yield (g/g)"}, "margin": {}, "yaxis2": {"anchor": "x2", "domain": [0.6000000000000001, 1.0], "rangemode": "nonnegative", "title": "EX_ac_e yield (g/g)"}, "yaxis5": {"showline": false, "anchor": "x5", "domain": [0.0, 0.4], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "xaxis1": {"anchor": "y1", "domain": [0.0, 0.2888888888888889]}, "xaxis5": {"showline": false, "anchor": "y5", "domain": [0.35555555555555557, 0.6444444444444445], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "yaxis6": {"showline": false, "anchor": "x6", "domain": [0.0, 0.4], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "showlegend": false, "yaxis3": {"anchor": "x3", "domain": [0.6000000000000001, 1.0], "rangemode": "nonnegative", "title": "EX_etoh_e yield (g/g)"}, "xaxis2": {"anchor": "y2", "domain": [0.35555555555555557, 0.6444444444444445]}, "xaxis6": {"showline": false, "anchor": "y6", "domain": [0.7111111111111111, 1.0], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "yaxis4": {"anchor": "x4", "domain": [0.0, 0.4], "rangemode": "nonnegative", "title": "EX_succ_e yield (g/g)"}}, {"linkText": "Export to plot.ly", "showLink": false})</script></div>
</div>
</div>
</div>
<div class="section" id="Database">
<h1>Database<a class="headerlink" href="#Database" title="Permalink to this headline">¶</a></h1>
<p>We can also choose to save this data to a database, as so:</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">db_name</span> <span class="o">=</span> <span class="s1">&#39;getting_started_tutorial.db&#39;</span>

<span class="n">impact</span><span class="o">.</span><span class="n">init_db</span><span class="p">(</span><span class="n">db_name</span> <span class="o">=</span> <span class="n">db_name</span><span class="p">)</span>
<span class="n">experiment_id</span> <span class="o">=</span> <span class="n">experiment</span><span class="o">.</span><span class="n">db_commit</span><span class="p">(</span><span class="n">db_name</span> <span class="o">=</span> <span class="n">db_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
Committed experiment # 10  to DB  getting_started_tutorial.db
</pre></div></div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Now let&#39;s recreate the experiment object and load the data from the db</span>
<span class="n">experiment</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">Experiment</span><span class="p">()</span>
<span class="n">experiment</span><span class="o">.</span><span class="n">db_load</span><span class="p">(</span><span class="n">db_name</span> <span class="o">=</span> <span class="n">db_name</span><span class="p">,</span> <span class="n">experiment_id</span> <span class="o">=</span> <span class="n">experiment_id</span><span class="p">)</span>
<span class="c1"># vars(experiment.replicateExperimentObjectDict[&#39;iJO1366Anaerobic&#39;])</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
unique yields:  [&#39;EX_glc_e&#39;, &#39;EX_ac_e&#39;, &#39;EX_for_e&#39;, &#39;Ec_biomass_iJO1366_core_53p95M&#39;, &#39;EX_succ_e&#39;, &#39;EX_etoh_e&#39;]
</pre></div></div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_1.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_1.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_2.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_2.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_3.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_3.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_4.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_4.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_5.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_5.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_6.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_6.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_7.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_7.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_8.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_8.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_9.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_9.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_10.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_10.png" />
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_11.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_11.png" />
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<img alt="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_12.png" src="2017.03.21 ipynb backup\../_build/doctrees/nbsphinx/2017.03.21ipynbbackup_0_getting_started-Copy_30_12.png" />
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># experiment.printGenericTimeCourse(titersToPlot = biomass_keys+product_keys)</span>
<span class="n">replicate_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">experiment</span><span class="o">.</span><span class="n">replicate_experiment_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">experiment</span><span class="o">.</span><span class="n">replicate_experiment_dict</span><span class="p">]</span>

<span class="c1"># Note this is only done to improve rendering of documentations</span>
<span class="c1"># An interactive plot can be generated by setting output_type=&#39;iPython&#39;</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">impact</span><span class="o">.</span><span class="n">printGenericTimeCourse_plotly</span><span class="p">(</span><span class="n">replicateTrialList</span><span class="o">=</span><span class="n">replicate_list</span><span class="p">,</span> <span class="n">dbName</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">strainsToPlot</span><span class="o">=</span><span class="p">[],</span>
                                     <span class="n">titersToPlot</span><span class="o">=</span><span class="n">product_keys</span><span class="p">,</span>
                                     <span class="n">output_type</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
                                     <span class="n">yieldFlag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">titerFlag</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">endpointFlag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sortBy</span><span class="o">=</span><span class="s1">&#39;strain_id&#39;</span><span class="p">)</span>
<span class="c1"># print(html)</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="c1"># Image(filename=filename)</span>
<span class="c1"># os.remove(filename)</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
This is the format of your plot grid:
[ (1,1) x1,y1 ]  [ (1,2) x2,y2 ]  [ (1,3) x3,y3 ]
[ (2,1) x4,y4 ]  [ (2,2) x5,y5 ]  [ (2,3) x6,y6 ]

</pre></div></div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>Out[19]:
</pre></div>
</div>
<div class="container">
<div id="b95ff0a4-e186-4304-9222-7305ff71c424" style="height: 600px; width: 100%;" class="plotly-graph-div"></div><script type="text/javascript">window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL="https://plot.ly";Plotly.newPlot("b95ff0a4-e186-4304-9222-7305ff71c424", [{"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x1", "x": ["Anaerobic,"], "yaxis": "y1", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.17133524915986847], "color": "rgb(166,206,227)"}, "y": [1.7447286078445146], "legendgroup": "iJO1366", "name": "iJO1366"}, {"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x2", "x": ["Anaerobic,"], "yaxis": "y2", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.06552622084895564], "color": "rgb(166,206,227)"}, "y": [0.8538052647656237], "legendgroup": "iJO1366", "name": "iJO1366"}, {"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x3", "x": ["Anaerobic,"], "yaxis": "y3", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.1032169629194151], "color": "rgb(166,206,227)"}, "y": [0.828086689956261], "legendgroup": "iJO1366", "name": "iJO1366"}, {"type": "bar", "marker": {"color": "rgb(166,206,227)"}, "xaxis": "x4", "x": ["Anaerobic,"], "yaxis": "y4", "showlegend": false, "error_y": {"type": "data", "visible": true, "array": [0.0006758821088666315], "color": "rgb(166,206,227)"}, "y": [0.008438011891059647], "legendgroup": "iJO1366", "name": "iJO1366"}], {"height": 600, "xaxis3": {"anchor": "y3", "domain": [0.7111111111111111, 1.0]}, "barmode": "group", "xaxis4": {"anchor": "y4", "domain": [0.0, 0.2888888888888889]}, "yaxis1": {"anchor": "x1", "domain": [0.6000000000000001, 1.0], "rangemode": "nonnegative", "title": "EX_for_e yield (g/g)"}, "margin": {}, "yaxis2": {"anchor": "x2", "domain": [0.6000000000000001, 1.0], "rangemode": "nonnegative", "title": "EX_ac_e yield (g/g)"}, "yaxis5": {"showline": false, "anchor": "x5", "domain": [0.0, 0.4], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "xaxis1": {"anchor": "y1", "domain": [0.0, 0.2888888888888889]}, "xaxis5": {"showline": false, "anchor": "y5", "domain": [0.35555555555555557, 0.6444444444444445], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "yaxis6": {"showline": false, "anchor": "x6", "domain": [0.0, 0.4], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "showlegend": false, "yaxis3": {"anchor": "x3", "domain": [0.6000000000000001, 1.0], "rangemode": "nonnegative", "title": "EX_etoh_e yield (g/g)"}, "xaxis2": {"anchor": "y2", "domain": [0.35555555555555557, 0.6444444444444445]}, "xaxis6": {"showline": false, "anchor": "y6", "domain": [0.7111111111111111, 1.0], "ticks": "", "zeroline": false, "showticklabels": false, "showgrid": false, "autotick": true}, "yaxis4": {"anchor": "x4", "domain": [0.0, 0.4], "rangemode": "nonnegative", "title": "EX_succ_e yield (g/g)"}}, {"linkText": "Export to plot.ly", "showLink": false})</script></div>
</div>
</div>
<div class="section" id="Exporting-Data">
<h1>Exporting Data<a class="headerlink" href="#Exporting-Data" title="Permalink to this headline">¶</a></h1>
<p>The data can be exported by calling the data function from any of the
modules, it will output the data from all of its indiviudal trials and
time courses, as well as the means and standard deviations.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">experiment</span><span class="o">.</span><span class="n">data</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>

<span class="c1"># Alternatively, this can be saved to a csv - here is some sample code using the csv package to do that</span>
<span class="c1"># with open(&#39;file_name.csv&#39;,&#39;w&#39;, newline=&#39;&#39;) as csvfile:</span>
<span class="c1">#     writer = csv.writer(csvfile, delimiter=&#39;,&#39;)</span>
<span class="c1">#     for row in experiment.data():</span>
<span class="c1">#         try:</span>
<span class="c1">#             writer.writerow(row)</span>
<span class="c1">#         except Exception:</span>
<span class="c1">#             print(row)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
[&#39;iJO1366Anaerobic&#39;]
[&#39;Ec_biomass_iJO1366_core_53p95M&#39;]
[&#39;Time (hours)&#39;, 0.0, 0.02002002002002002, 0.04004004004004004, 0.06006006006006006]
[&#39;rep #2&#39;, 0.050000000000000003, 0.050246980956714447, 0.050495181793985475, 0.050744608265542356]
[&#39;rep #3&#39;, 0.050000000000000003, 0.050240043066167729, 0.050481238465156029, 0.050723591744228969]
[&#39;Average&#39;, 0.050000000000000003, 0.050243512011441088, 0.050488210129570749, 0.050734100004885666]
[&#39;Std&#39;, 0.0, 4.905829452714503e-06, 9.8594223676145956e-06, 1.4860924737647549e-05]
[]
[&#39;EX_glc_e&#39;]
[&#39;Time (hours)&#39;, 0.0, 0.02002002002002002, 0.04004004004004004, 0.06006006006006006]
[&#39;rep #0&#39;, 100.0, 99.989248483773935, 99.978447817614679, 99.967597776790313]
[&#39;rep #1&#39;, 100.0, 99.990740794083408, 99.981433661037812, 99.972078351601851]
[&#39;rep #2&#39;, 100.0, 99.990494166990615, 99.980941383070416, 99.971341426789238]
[&#39;rep #3&#39;, 100.0, 99.990110075660127, 99.980172674487932, 99.970187567932626]
[&#39;Average&#39;, 100.0, 99.990148380127025, 99.980248884052713, 99.9703012807785]
[&#39;Std&#39;, 0.0, 0.0006536572825872897, 0.00130803919486586, 0.0019631393956549377]
[]
[&#39;EX_for_e&#39;]
[&#39;Time (hours)&#39;, 0.0, 0.02002002002002002, 0.04004004004004004, 0.06006006006006006]
[&#39;rep #2&#39;, 0.0, 0.015743194280676387, 0.031564146850319039, 0.04746322446626472]
[&#39;rep #3&#39;, 0.0, 0.017044129930633114, 0.034170080638806222, 0.051378246005048679]
[&#39;Average&#39;, 0.0, 0.016393662105654752, 0.03286711374456263, 0.049420735235656696]
[&#39;Std&#39;, 0.0, 0.00091990041997173021, 0.0018426734531624372, 0.00276833827856553]
[]
[&#39;EX_succ_e&#39;]
[&#39;Time (hours)&#39;, 0.0, 0.02002002002002002, 0.04004004004004004, 0.06006006006006006]
[&#39;rep #1&#39;, 0.0, 7.7846553311007526e-05, 0.00015609605281841291, 0.00023475059418065792]
[&#39;rep #3&#39;, 0.0, 8.3795682918719316e-05, 0.00016799362913622875, 0.00025259577512497261]
[&#39;Average&#39;, 0.0, 8.0821118114863421e-05, 0.00016204484097732084, 0.00024367318465281525]
[&#39;Std&#39;, 0.0, 4.2066698877706725e-06, 8.4128568940120576e-06, 1.2618448457225872e-05]
[]
[&#39;EX_ac_e&#39;]
[&#39;Time (hours)&#39;, 0.0, 0.02002002002002002, 0.04004004004004004, 0.06006006006006006]
[&#39;rep #0&#39;, 0.0, 0.0085701498251549608, 0.017179477593443241, 0.025828162441098351]
[&#39;rep #3&#39;, 0.0, 0.008018432814989325, 0.016075358319851636, 0.024170961816187803]
[&#39;Average&#39;, 0.0, 0.0082942913200721429, 0.01662741795664744, 0.024999562128643078]
[&#39;Std&#39;, 0.0, 0.0003901228391840885, 0.00078073022559538871, 0.0011718177996608327]
[]
[&#39;EX_etoh_e&#39;]
[&#39;Time (hours)&#39;, 0.0, 0.02002002002002002, 0.04004004004004004, 0.06006006006006006]
[&#39;rep #0&#39;, 0.0, 0.0077110220582298919, 0.015457294606808319, 0.023238978824183281]
[&#39;rep #1&#39;, 0.0, 0.0086948427209023356, 0.017434691336782035, 0.026219779916069542]
[&#39;rep #2&#39;, 0.0, 0.0084476822819695187, 0.016937089089995534, 0.02546841722336797]
[&#39;rep #3&#39;, 0.0, 0.0075896372716009429, 0.015215708789205419, 0.022878389945183611]
[&#39;Average&#39;, 0.0, 0.0081107960831756712, 0.016261195955697829, 0.024451391477201101]
[&#39;Std&#39;, 0.0, 0.00054345455617463875, 0.0010913636321079306, 0.0016437576159536538]
</pre></div></div>
</div>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Naveen Venayak.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>